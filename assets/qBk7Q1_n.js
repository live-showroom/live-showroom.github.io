import{u as W,x as I,v as Z,w as ee,R as te,y as D,z as L,A as E,T as se,U as ae,V as oe,B as T,D as le,G as U,H as O,I as V,J as ne,K as ie,M as re,N as ce,O as ue,P as de,Q as F}from"./Bmmr3a6F.js";import{d as me,r as n,u as fe,o as pe,a as K,c as P,b as h,e as j,f as e,g as m,h as Y,t as M,i as y,w as _e,n as ve,j as i}from"./ClArkDUg.js";const he={class:"bg-black min-h-[100dvh] w-full flex flex-col overflow-x-hidden"},be={class:"flex justify-center absolute z-[9999] items-center w-full aspect-video top-[9.07407407407%]"},ge={key:0,class:"size-full"},xe=["src"],we={key:1,class:"text-white relative text-lg md:text-xl text-center flex flex-col gap-3"},ye=m("div",null,"Live belum dimulai",-1),ke={key:2,class:"text-white font-semibold px-4 text-center text-base md:text-lg lg:text-xl"},Re=m("div",{class:"absolute top-0 aspect-video w-[300%] left-1/2 -translate-x-1/2 -z-10"},[m("img",{class:"size-full object-cover pointer-events-none",src:"https://static.showroom-live.com/image/room_background/default.png?v=3",alt:""})],-1),Ce=m("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/8/82/Telegram_logo.svg/2048px-Telegram_logo.svg.png"},null,-1),ze=me({__name:"index",setup(Ae){const f=n(!1),z=n(null),q={apiKey:"AIzaSyCmFoeQm28lLubMcuXjwfVrO2Grwn57E_s",projectId:"showroom-shared",appId:"1:888402111940:web:2d4ed3c66a21893c45c891",databaseURL:"https://showroom-shared-default-rtdb.asia-southeast1.firebasedatabase.app/"},s=n(null),N=n(0),G=fe(),k=n(0),B=n(),R=W(q),r=n();pe(async()=>{var a;const t=String(G.hash);if(t)try{K().public.debug_token&&(self.FIREBASE_APPCHECK_DEBUG_TOKEN=K().public.debug_token);const o=I(R),C=Z(t.replace("#","")),[c,p]=C.split(":");ee(R,{provider:new te("6LcJP8wpAAAAALr1Ifxy1SR_vgOsDg6oAnYnlaX8"),isTokenAutoRefreshEnabled:!0});const x={device_count:D(-1),last_changed:L()},w={device_count:D(1),play_count:D(1),last_changed:L()},u=E(o,`/new_status/${c}/${p}`),b=se(E(o,"/tickets"),ae("pass"),oe(p)),_=(a=(await T(b)).val())==null?void 0:a[c];_&&(r.value={username:c,password:p});const l=(await T(u)).val();if(!l){console.log("Status fail");return}let v;k.value=Number.isNaN(_.max_device)?1:Number(_.max_device),B.value=l==null?void 0:l.refresh_key,(l==null?void 0:l.device_count)>=k.value?f.value=!0:(v=le(u.ref),v.update(x).then(function(){U(u.ref,w)}),O(b,async A=>{var $;const d=($=A.val())==null?void 0:$[c];d?(r.value={username:c,password:p},s.value=d==null?void 0:d.premium_live,N.value+=1):(r.value=null,V(o))})),O(u,A=>{var d;((d=A.val())==null?void 0:d.refresh_key)!==B.value&&(z.value="Kamu menekan tombol reset, silahkan refresh halaman ini",f.value=!0,v&&v.cancel().then(()=>{V(o)}))})}catch(o){console.error(o)}});const g=n(!1);async function H(){g.value=!1;try{if(!r.value)return;const t=I(R),a=E(t,`/new_status/${r.value.username}/${r.value.password}`);await U(a,{device_count:0,refresh_key:ie()})}catch(t){console.error(t)}}const J=P(()=>{var t;return((t=s.value)==null?void 0:t.title)??"Showroom Live"}),Q=P(()=>{var t,a;return(a=(t=s.value)==null?void 0:t.streaming_url_list)==null?void 0:a.some(o=>F(o.url))}),S=n(!1);function X(t){S.value=t}return ne({title:J}),(t,a)=>{var x,w,u,b,_,l;const o=re,C=ce,c=ue,p=de;return i(),h("div",he,[j(o,{"is-open":e(g),onClose:a[0]||(a[0]=()=>g.value=!1),onReset:H},null,8,["is-open"]),m("div",{class:ve({"w-[max(min(81%,640px),33.3333%)] aspect-[640/1080] relative left-1/2 -translate-x-1/2 ":!e(S)})},[m("div",be,[e(s)&&!e(f)&&((w=(x=e(s))==null?void 0:x.streaming_url_list)!=null&&w.length)?(i(),h("div",ge,[e(Q)?(i(),h("iframe",{id:"ytplayer",key:`yt-${e(N)}`,type:"text/html",class:"size-full",src:(l=e(s).streaming_url_list.find(v=>("isYoutubeEmbedUrl"in t?t.isYoutubeEmbedUrl:e(F))(v.url)))==null?void 0:l.url,frameborder:"0"},null,8,xe)):(i(),Y(C,{key:0,class:"size-full",sources:((u=e(s))==null?void 0:u.streaming_url_list)??[],title:(b=e(s))==null?void 0:b.title,poster:(_=e(s))==null?void 0:_.image,onFullscreen:X},null,8,["sources","title","poster"]))])):!e(f)&&e(s)?(i(),h("div",we,[m("div",null,M(e(s).title),1),ye])):y("",!0),e(f)?(i(),h("div",ke,M(e(z)??`Maaf pemutaran hanya
                    untuk ${e(k)} device`),1)):y("",!0)]),e(r)?(i(),h("button",{key:0,class:"absolute top-[44.44%] right-0 hover:bg-red-400/30 text-red-500 px-3 py-1 rounded-full",onClick:a[1]||(a[1]=()=>g.value=!0)},"Reset")):y("",!0),Re,j(c,{to:"https://t.me/showroomlivebot",external:!0,target:"_blank",title:"Showroom Live Bot Telegram",class:"telegram-button absolute left-1/2 -translate-x-1/2 bottom-[41%] w-[10.5%] aspect-square rounded-full hover:scale-110 transition-[box-shadow,transform] duration-300 origin-bottom"},{default:_e(()=>[Ce]),_:1}),e(s)&&!e(f)?(i(),Y(p,{key:1,time:e(s).start_at,title:e(s).title??"",class:"absolute left-1/2 -translate-x-1/2 top-[80%] md:top-[44.3%] text-white font-bold"},null,8,["time","title"])):y("",!0)],2)])}}});export{ze as default};
