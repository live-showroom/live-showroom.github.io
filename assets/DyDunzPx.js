import{u as Q,x as z,v as X,w as W,R as Z,y as D,z as I,A as E,T as ee,U as te,V as se,B as L,D as ae,G as T,H as U,I as O,J as oe,K as le,M as ne,N as ie,O as re,P as ce,Q as V}from"./i_C_ivpk.js";import{d as ue,r as n,u as de,o as me,a as K,c as P,b as h,e as j,f as e,g as m,h as Y,t as F,i as y,w as fe,j as i}from"./EFdmivQ0.js";const pe={class:"bg-black min-h-[100dvh] w-full flex flex-col overflow-x-hidden"},_e={class:"w-[max(min(81%,640px),33.3333%)] aspect-[640/1080] relative left-1/2 -translate-x-1/2"},ve={class:"flex justify-center absolute items-center w-full aspect-video top-[9.07407407407%]"},he={key:0,class:"size-full"},be=["src"],ge={key:1,class:"text-white relative text-lg md:text-xl text-center flex flex-col gap-3"},xe=m("div",null,"Live belum dimulai",-1),we={key:2,class:"text-white font-semibold px-4 text-center text-base md:text-lg lg:text-xl"},ye=m("div",{class:"absolute top-0 aspect-video w-[300%] left-1/2 -translate-x-1/2 -z-10"},[m("img",{class:"size-full object-cover pointer-events-none",src:"https://static.showroom-live.com/image/room_background/default.png?v=3",alt:""})],-1),ke=m("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/8/82/Telegram_logo.svg/2048px-Telegram_logo.svg.png"},null,-1),De=ue({__name:"index",setup(Re){const f=n(!1),N=n(null),M={apiKey:"AIzaSyCmFoeQm28lLubMcuXjwfVrO2Grwn57E_s",projectId:"showroom-shared",appId:"1:888402111940:web:2d4ed3c66a21893c45c891",databaseURL:"https://showroom-shared-default-rtdb.asia-southeast1.firebasedatabase.app/"},s=n(null),B=n(0),q=de(),k=n(0),S=n(),R=Q(M),r=n();me(async()=>{var a;const t=String(q.hash);if(t)try{K().public.debug_token&&(self.FIREBASE_APPCHECK_DEBUG_TOKEN=K().public.debug_token);const o=z(R),C=X(t.replace("#","")),[c,p]=C.split(":");W(R,{provider:new Z("6LcJP8wpAAAAALr1Ifxy1SR_vgOsDg6oAnYnlaX8"),isTokenAutoRefreshEnabled:!0});const x={device_count:D(-1),last_changed:I()},w={device_count:D(1),play_count:D(1),last_changed:I()},u=E(o,`/new_status/${c}/${p}`),b=ee(E(o,"/tickets"),te("pass"),se(p)),_=(a=(await L(b)).val())==null?void 0:a[c];_&&(r.value={username:c,password:p});const l=(await L(u)).val();if(!l){console.log("Status fail");return}let v;k.value=Number.isNaN(_.max_device)?1:Number(_.max_device),S.value=l==null?void 0:l.refresh_key,(l==null?void 0:l.device_count)>=k.value?f.value=!0:(v=ae(u.ref),v.update(x).then(function(){T(u.ref,w)}),U(b,async A=>{var $;const d=($=A.val())==null?void 0:$[c];d?(r.value={username:c,password:p},s.value=d==null?void 0:d.premium_live,B.value+=1):(r.value=null,O(o))})),U(u,A=>{var d;((d=A.val())==null?void 0:d.refresh_key)!==S.value&&(N.value="Kamu menekan tombol reset, silahkan refresh halaman ini",f.value=!0,v&&v.cancel().then(()=>{O(o)}))})}catch(o){console.error(o)}});const g=n(!1);async function G(){g.value=!1;try{if(!r.value)return;const t=z(R),a=E(t,`/new_status/${r.value.username}/${r.value.password}`);await T(a,{device_count:0,refresh_key:le()})}catch(t){console.error(t)}}const H=P(()=>{var t;return((t=s.value)==null?void 0:t.title)??"Showroom Live"}),J=P(()=>{var t,a;return(a=(t=s.value)==null?void 0:t.streaming_url_list)==null?void 0:a.some(o=>V(o.url))});return oe({title:H}),(t,a)=>{var x,w,u,b,_,l;const o=ne,C=ie,c=re,p=ce;return i(),h("div",pe,[j(o,{"is-open":e(g),onClose:a[0]||(a[0]=()=>g.value=!1),onReset:G},null,8,["is-open"]),m("div",_e,[m("div",ve,[e(s)&&!e(f)&&((w=(x=e(s))==null?void 0:x.streaming_url_list)!=null&&w.length)?(i(),h("div",he,[e(J)?(i(),h("iframe",{id:"ytplayer",key:`yt-${e(B)}`,type:"text/html",class:"size-full",src:(l=e(s).streaming_url_list.find(v=>("isYoutubeEmbedUrl"in t?t.isYoutubeEmbedUrl:e(V))(v.url)))==null?void 0:l.url,frameborder:"0"},null,8,be)):(i(),Y(C,{key:0,class:"size-full",sources:((u=e(s))==null?void 0:u.streaming_url_list)??[],title:(b=e(s))==null?void 0:b.title,poster:(_=e(s))==null?void 0:_.image},null,8,["sources","title","poster"]))])):!e(f)&&e(s)?(i(),h("div",ge,[m("div",null,F(e(s).title),1),xe])):y("",!0),e(f)?(i(),h("div",we,F(e(N)??`Maaf pemutaran hanya
                    untuk ${e(k)} device`),1)):y("",!0)]),e(r)?(i(),h("button",{key:0,class:"absolute top-[44.44%] right-0 hover:bg-red-400/30 text-red-500 px-3 py-1 rounded-full",onClick:a[1]||(a[1]=()=>g.value=!0)},"Reset")):y("",!0),ye,j(c,{to:"https://t.me/showroomlivebot",external:!0,target:"_blank",title:"Showroom Live Bot Telegram",class:"telegram-button absolute left-1/2 -translate-x-1/2 bottom-[41%] w-[10.5%] aspect-square rounded-full hover:scale-110 transition-[box-shadow,transform] duration-300 origin-bottom"},{default:fe(()=>[ke]),_:1}),e(s)&&!e(f)?(i(),Y(p,{key:1,time:e(s).start_at,class:"absolute left-1/2 -translate-x-1/2 top-[80%] md:top-[44.3%] text-white font-bold"},null,8,["time"])):y("",!0)])])}}});export{De as default};
